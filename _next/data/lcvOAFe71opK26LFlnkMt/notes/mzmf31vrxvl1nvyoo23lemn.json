{"pageProps":{"note":{"id":"mzmf31vrxvl1nvyoo23lemn","title":"2023-12-19","desc":"","updated":1703173293866,"created":1702987672061,"traitIds":["open-notebook-mvisani"],"custom":{},"fname":"open-notebook.dbgi.mvisani.2023.12.19","type":"note","vault":{"fsPath":"vault"},"contentHash":"123fc29aead3baa04d5e40c42e6e34e4","links":[],"anchors":{"this-is-marcos-daily-open-notebook":{"type":"header","text":"This is Marco's daily open-notebook.","value":"this-is-marcos-daily-open-notebook","line":9,"column":0,"depth":1},"notes":{"type":"header","text":"Notes","value":"notes","line":14,"column":0,"depth":2},"todo-today":{"type":"header","text":"Todo today","value":"todo-today","line":60,"column":0,"depth":2},"done":{"type":"header","text":"Done","value":"done","line":69,"column":0,"depth":2},"todo-tomorrow":{"type":"header","text":"Todo tomorrow","value":"todo-tomorrow","line":73,"column":0,"depth":2}},"children":[],"parent":"ihvbqeicxh0fxwt15arjb7l","data":{}},"body":"<h1 id=\"2023-12-19\">2023-12-19<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#2023-12-19\"></a></h1>\n<h1 id=\"this-is-marcos-daily-open-notebook\">This is Marco's daily open-notebook.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#this-is-marcos-daily-open-notebook\"></a></h1>\n<p>Today is 2023.12.19</p>\n<h2 id=\"notes\">Notes<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#notes\"></a></h2>\n<p>Prep work for starting the job on January.</p>\n<p>This query : <a href=\"https://w.wiki/8YzQ\">https://w.wiki/8YzQ</a> will recursively find all the parent taxon of a species all the way to the \"Biota\" group. This should then be useful to create the LOTUS graph to use in <a href=\"https://github.com/AnacletoLAB/grape/tree/main\">grape</a>. </p>\n<p>I should then :</p>\n<ul>\n<li>get all the species that are linked to a referenced molecule using this query : <a href=\"https://w.wiki/8Z7Y\">https://w.wiki/8Z7Y</a></li>\n<li>for each species get their taxonomy thanks to this query : <a href=\"https://w.wiki/8YzQ\">https://w.wiki/8YzQ</a></li>\n<li>create a list of all the nodes (species : 37082 ) and their taxonomy </li>\n<li>create a list of all the edges of the tree</li>\n<li>once this is done create a tree of molecules (already done in an other repo) and link them together (try to do it with weighted edges between species and molecules)</li>\n<li>Then talk to Luca</li>\n</ul>\n<p>Here is an example of how to retrieve the data : </p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> sys\n<span class=\"token keyword\">from</span> SPARQLWrapper <span class=\"token keyword\">import</span> SPARQLWrapper<span class=\"token punctuation\">,</span> JSON\n\nendpoint_url <span class=\"token operator\">=</span> <span class=\"token string\">\"https://query.wikidata.org/sparql\"</span>\n\nquery <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"SELECT ?entity ?entityLabel (count(?mid) as ?depth) WHERE {\n  wd:Q27438471 wdt:P171* ?mid.\n  ?entity wdt:P225 ?entityLabel.\n  ?mid wdt:P171* ?entity.\n  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" }\n} group by ?entity ?entityLabel\norder by ?depth\"\"\"</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_results</span><span class=\"token punctuation\">(</span>endpoint_url<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    user_agent <span class=\"token operator\">=</span> <span class=\"token string\">\"WDQS-example Python/%s.%s\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>version_info<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> sys<span class=\"token punctuation\">.</span>version_info<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># TODO adjust user agent; see https://w.wiki/CX6</span>\n    sparql <span class=\"token operator\">=</span> SPARQLWrapper<span class=\"token punctuation\">(</span>endpoint_url<span class=\"token punctuation\">,</span> agent<span class=\"token operator\">=</span>user_agent<span class=\"token punctuation\">)</span>\n    sparql<span class=\"token punctuation\">.</span>setQuery<span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span>\n    sparql<span class=\"token punctuation\">.</span>setReturnFormat<span class=\"token punctuation\">(</span>JSON<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> sparql<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\nresults <span class=\"token operator\">=</span> get_results<span class=\"token punctuation\">(</span>endpoint_url<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">)</span>\npd<span class=\"token punctuation\">.</span>json_normalize<span class=\"token punctuation\">(</span>results<span class=\"token punctuation\">[</span><span class=\"token string\">'results'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'bindings'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"todo-today\">Todo today<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#todo-today\"></a></h2>\n<p>packages used : python 3.11.*, pip, grape</p>\n<p>Here are the NaN values of the species in LOTUS. It seems to confirm what I saw during the Master thesis where GBIF seems to have the most species known. The total is 37082 species. </p>\n<ul>\n<li>NaN is NCBI : 8133</li>\n<li>NaN is GBIF : 736</li>\n<li>NaN is OTL : 8073</li>\n</ul>\n<h2 id=\"done\">Done<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#done\"></a></h2>\n<ul>\n<li></li>\n</ul>\n<h2 id=\"todo-tomorrow\">Todo tomorrow<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#todo-tomorrow\"></a></h2>","noteIndex":{"id":"txkHnVTI9AawnquiublXO","title":"The DBGI Dendron notes","desc":"","updated":1688889927268,"created":1645438795591,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"fbac06bb8ff15f08a14f40cc7c9e268e","links":[{"type":"wiki","from":{"fname":"root","id":"txkHnVTI9AawnquiublXO","vaultName":"vault"},"value":"open-notebook","position":{"start":{"line":28,"column":53,"offset":1976},"end":{"line":28,"column":70,"offset":1993},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"open-notebook"}},{"type":"wiki","from":{"fname":"root","id":"txkHnVTI9AawnquiublXO","vaultName":"vault"},"value":"welcome","position":{"start":{"line":34,"column":81,"offset":2595},"end":{"line":34,"column":92,"offset":2606},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"welcome"}},{"from":{"fname":"welcome","id":"tofizf0eb38rduuw6ffnzba","vaultName":"vault"},"type":"backlink","position":{"start":{"line":5,"column":27,"offset":59},"end":{"line":5,"column":35,"offset":67},"indent":[]},"value":"root"}],"anchors":{"overview":{"type":"header","text":"Overview","value":"overview","line":8,"column":0,"depth":1},"main-goals":{"type":"header","text":"Main goals","value":"main-goals","line":12,"column":0,"depth":1},"an-open-science-project":{"type":"header","text":"An Open Science project","value":"an-open-science-project","line":18,"column":0,"depth":1},"working-with-the-workshop-doors-open":{"type":"header","text":"Working with the workshop doors open","value":"working-with-the-workshop-doors-open","line":21,"column":0,"depth":2},"open-notebook-science":{"type":"header","text":"Open Notebook Science","value":"open-notebook-science","line":28,"column":0,"depth":2},"whats-new-":{"type":"header","text":"What's new ?!","value":"whats-new-","line":43,"column":0,"depth":2}},"children":["il7c8piddciyg8dw5owj6ui","se2pzun6petcy32hf5j3wuw","bum7d9d6lnc0a863iqaogka","r23kzroton7bo017hsc6lmk","fmlpvd5ebpugd0idxhytk28","iq3hz5b7sskcu56bl8pgbwq","vphzpqwuu98x8sfgfrconej","hl55gsxxo1wlj1igs9mso7p","1sxxmo2bt2eans2xhdorb0q","8yees000uw0bxldzotr8uvw","9p6t4gle5zj5ilkd67j9rud","n9brxvyxekn9b8bv9d8xdik","7ic8gy5h3i6v906dzrig6hy","m0qwxiyv7i2hnkr3fk2m3by","o6r2k35gfsfur2gwgk56ra3","o2psjwj00vl4m8d7rgyfk9f","8u9qb1u3gp4e3osrb73xvor","f7cx4bd1mxjt63d0daza1xb","xoiil9w7pvz3ojhif2a8ppj","o8bu4pl5w2ag7o1h3401qgj","u9u4dax4f23kvq98mtw0ezj","eh30zgccb8kw1z36jlstijv","b17we89hoe3m5ulu9d1t8by","rnoodwuxipqxc8zdxt7kqdm","6c37mounk3i96bftncrvr29","p6xf974t6tqndzis0qjc9j6","165zhtrhauww30lf9dbp8fa","h2jxo1dbamqvqodtuopq9q1","1k6j3afbnh1kiyz95m1kyxz","dwyb49xky735sox320haxga","trzsyfzfrls2if6tjt9dy5u","nnhoqwog50xoiu1bzbn6cyj","q7siltgd71qf2xgppbysw35","tofizf0eb38rduuw6ffnzba","v3eyay0icafeftx6kbyemlm","h8trx40s491czjp1npypo68","eru1s83ybgl3raytc4dgeuz","lykjjec8x2kmqnxjz10nwm6","q8ucho0l7y37kqhprv8ku3k","fynboti1depbjpoz1whdnvt","il17okdfivbzsj1ij63uf8m"],"parent":null,"data":{},"body":"\n# Overview\n\nThe Digital Botanical Gardens Initiative (DBGI, www.dbgi.org) ambitions to explore innovative solutions for the collection, management and sharing of digital information acquired on living botanical collections. A particular focus will be placed on the large scale characterization of the chemodiversity of living plants collections through mass spectrometric approaches. The acquired data will be structured, organized and connected with relevant metadata through [semantic web](https://en.wikipedia.org/wiki/Semantic_Web) technology. The gathered knowledge will then inform ecosystem functioning research and orient [biodiversity conservation](https://en.wikipedia.org/wiki/Conservation_biology) projects. The DBGI initially aims to take advantage of the readily available living collections of Swiss botanical gardens to establish robust and scalable biodiversity digitisation workflows. The ultimate goal is to apply these approaches in the field and at the global scale in wildlife ecosystems. \n\n# Main goals\n\nThe DBGI main goals are briefly summarized below :\n\n![](/assets/images/2022-06-18-17-13-23.png){max-width: 400px, display: block, margin: 0 auto}\n\n# An Open Science project\n\n\n## Working with the workshop doors open\n\n![](/assets/images/2022-06-18-17-47-56.png){max-width: 400px}\n\nA way of working briefly described by Andy Matuschak here https://notes.andymatuschak.org/z21cgR9K3UcQ5a7yPsj2RUim3oM2TzdBByZu. \n\n\n## Open Notebook Science\n\nIf we apply this \"working with the workshop doors open\" idea to a scientific research endeavor we understand it as respecting the core concepts of Open Science. These is more precisely the principle of Open Notebook Science https://en.wikipedia.org/wiki/Open-notebook_science\n\nFor the projects of the DBGI we will follow such an Open Notebook Science approach in order to share early ideas and results but also the less shiny parts of the research projects. \n\nYou can follow the DBGI related Open Notebooks here [[open-notebook]].\n\nExpect to find strange ideas, badly formulated text and poorly written code. However if you have time and interest you should be able to participate at each step of the process. Hopefully this will lead to enhanced collaboration and participation. Maybe yes, maybe not. Let's make it a methodological experiment !\n\nEach pages of this website are written in markdown and hosted on Github. You can edit them by clicking on the \"Click here to edit this page on Github !\" link at the bottom of the page. See down there ðŸ‘‡\n\nIf you are willing to participate the the DBGI Dendron notes have a look at the [[welcome]] section to get you started !\n\n\n## What's new ?!\n\nThis web site might not necessarily seem to be change since the last time you came to visit.\n\nIf something moved recently you should be able to track this over there https://github.com/digital-botanical-gardens-initiative/dendron-dbgi/commits/main"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.84.0","enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":true,"hooks":{"onCreate":[{"id":"hello","pattern":"hello.*","type":"js"}]}},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"DBGI Dendron page","description":"Open Notebook Science in the DBGI"},"github":{"enableEditLink":true,"editLinkText":"Participate and click here to edit this page on Github !","editBranch":"main","editViewMode":"tree","editRepository":"https://github.com/digital-botanical-gardens-initiative/dendron-dbgi"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","enableMermaid":true,"enableHierarchyDisplay":true,"assetsPrefix":"/dendron-dbgi","siteUrl":"https://digital-botanical-gardens-initiative.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"ga":{"tracking":"G-EPEXM5GLLG"},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}